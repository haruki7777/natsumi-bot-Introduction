<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>나츠미 소개</title>
  <link rel="stylesheet" href="/natsumi-bot-Introduction/css/style.css">
  <style>
    /* CSS 수정: 음악 재생/일시정지 버튼 스타일 */
    #playMusicButton {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 100;
      padding: 10px 20px;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: flex; /* 아이콘과 텍스트를 함께 표시하기 위해 flex 사용 */
      align-items: center; /* 아이콘과 텍스트를 수직으로 가운데 정렬 */
      gap: 8px; /* 아이콘과 텍스트 간 간격 추가 */
      font-size: 16px; /* 아이콘 크기 설정 */
      line-height: 0; /* 텍스트 높이로 인한 간격 제거 */
    }
    #playMusicButton.playing {
      background-color: #f03e3e; /* 재생 중일 때 버튼 색 변경 */
    }
    /* 재생/일시정지 아이콘 */
    #playMusicButton::before {
      content: '▶'; /* 기본적으로 재생 아이콘 표시 */
      font-size: 16px; /* 아이콘 크기 설정 */
    }
    #playMusicButton.playing::before {
      content: '❚❚'; /* 재생 중일 때는 일시정지 아이콘 표시 */
    }
    #playMusicButton span {
      display: none; /* 텍스트 숨김 */
    }

  </style>
</head>
<body>
  <div class="invite-button-fixed">
    <a class="button" href="https://discord.com/api/oauth2/authorize?client_id=905355491708903485&permissions=4294443007&scope=bot%20applications.commands">나츠미 초대</a>
  </div>

  <button class="menu-toggle-button" onclick="toggleRightMenu()">☰</button>

  <div class="right-menu-container" id="rightMenu">
    <h2>나츠미 봇 도움말</h2>
    <div id="help-content" class="menu-content active">
      <h3>도움말</h3>
      <p>흥, 나츠미 사용법? 그렇게 알고 싶으면 알려주지. ... 딱히 네가 부탁해서 그런 건 아니니까 착각하지 마!</p>
      <ul>
        <li>오른쪽 위의 '☰' 버튼을 눌러 명령어를 확인할 수 있어.</li>
        <li>각 명령어 버튼을 클릭하면 간단한 설명을 볼 수 있다.</li>
        <li>더 자세한 사용법은 ... 알아서 찾아봐!</li>
      </ul>
      <hr>
      <h3>초대하기</h3>
      <p>날 네 서버에 초대하고 싶다고? ... 뭐, 원한다면 못 이기는 척 허락해주지!</p>
      <a class="invite-link" href="https://discord.com/api/oauth2/authorize?client_id=905355491708903485&permissions=4294443007&scope=bot%20applications.commands" target="_blank">나츠미 초대</a>
    </div>
    <hr>
    <h3>명령어</h3>
    <button class="command-category-button" onclick="toggleCommandList('general')">일반 명령어</button>
    <ul class="command-list" id="general-commands">
      <li><button class="command-item-button" onclick="showDescription('ping')">/핑</button></li>
      <li><button class="command-item-button" onclick="showDescription('serverinfo')">/서버정보</button></li>
      <li><button class="command-item-button" onclick="showDescription('userinfo')">/유저정보</button></li>
      <li><button class="command-item-button" onclick="showDescription('attendance')">/출석</button></li>
      <li><button class="command-item-button" onclick="showDescription('balance')">/잔액</button></li>
      <li><button class="command-item-button" onclick="showDescription('help')">/도움말</button></li>
      <li><button class="command-item-button" onclick="showDescription('natsumi')">/나츠미</button></li>
      <li><button class="command-item-button" onclick="showDescription('slotmachine')">/슬롯머신</button></li>
      <li><button class="command-item-button" onclick="showDescription('translate')">/번역</button></li>
      <li><button class="command-item-button" onclick="showDescription('rank')">/도박랭킹</button></li>
      <li><button class="command-item-button" onclick="showDescription('money')">/머니</button></li>
      <li><button class="command-item-button" onclick="showDescription('sfw')">/sfw</button></li>
      <li><button class="command-item-button" onclick="showDescription('nsfw')">/nsfw</button></li>
      <li><button class="command-item-button" onclick="showDescription('intro')">/소개</button></li>
      <li><button class="command-item-button" onclick="showDescription('prefix')">/호출어</button></li>
    </ul>

    <button class="command-category-button" onclick="toggleCommandList('admin')">관리자 기능</button>
    <ul class="command-list" id="admin-commands">
      <li><button class="command-item-button" onclick="showDescription('stealsticker')">/스틸 스티커</button></li>
      <li><button class="command-item-button" onclick="showDescription('stealemote')">/스틸 이모지</button></li>
      <li><button class="command-item-button" onclick="showDescription('ban')">/밴</button></li>
      <li><button class="command-item-button" onclick="showDescription('unban')">/언밴</button></li>
      <li><button class="command-item-button" onclick="showDescription('mute')">/뮤트</button></li>
      <li><button class="command-item-button" onclick="showDescription('unmute')">/언뮤트</button></li>
      <li><button class="command-item-button" onclick="showDescription('kick')">/킥</button></li>
      <li><button class="command-item-button" onclick="showDescription('clear')">/청소</button></li>
      <li><button class="command-item-button" onclick="showDescription('nsfwgen')">/nsfw생성</button></li>
      <li><button class="command-item-button" onclick="showDescription('vote')">/투표</button></li>
    </ul>

    <button class="command-category-button" onclick="toggleCommandList('dev')">개발자 기능</button>
    <ul class="command-list" id="dev-commands">
      <li><button class="command-item-button" onclick="showDescription('learn')">/학습</button></li>
      <li><button class="command-item-button" onclick="showDescription('reload')">/리로드</button></li>
    </ul>

    <div id="commandDescription" class="command-description" style="display: none;"></div>
  </div>

  <div class="profile-container">
    <img src="/natsumi-bot-Introduction/3575C7AA-8A19-4EF1-8241-71304B784788.png" alt="나츠미 프로필 이미지" class="profile-image">
    <h1>나츠미 를 찾아왔구나? 흥!</h1>
    <a class="invite-button" href="https://discord.com/api/oauth2/authorize?client_id=905355491708903485&permissions=4294443007&scope=bot%20applications.commands">나츠미 초대하기</a>
  </div>

  <div id="fullScreenOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); color: white; z-index: 101; display: none; justify-content: center; align-items: center; flex-direction: column;">
    <div style="background-color: #333; padding: 20px; border-radius: 8px; max-width: 80%; text-align: center;">
      <h2 id="fullScreenKoreanCommand" style="margin-bottom: 10px;"></h2>
      <p id="fullScreenText" style="font-size: 1.2em;"></p>
      <button id="closeFullScreen" style="padding: 10px 20px; background-color: #ff69b4; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;" onclick="document.getElementById('fullScreenOverlay').style.display='none';">닫기</button>
    </div>
  </div>

  <button id="playMusicButton" class="playing" style="position: fixed; bottom: 20px; left: 20px; z-index: 100;"><span>음악 재생</span></button>
  <audio id="backgroundMusic" src="/natsumi-bot-Introduction/music/CHUU - Strawberry Rush (PADO Remix).mp3" loop style="display:none;"></audio>

  <script src="/natsumi-bot-Introduction/js/script.js"></script>

  <script>
    const music = document.getElementById('backgroundMusic');
    const button = document.getElementById('playMusicButton');
    let isPlaying = false; // 재생 상태를 추적하는 변수

    // 자동 재생 시도 및 처리
    function playMusic() {
      music.muted = false;
      const playPromise = music.play();

      if (playPromise !== undefined) {
        playPromise.then(() => {
          // 자동 재생 성공
          isPlaying = true;
          button.classList.add('playing');
        }).catch(error => {
          // 자동 재생 실패 (사용자 상호 작용 필요)
          console.log("자동 재생 실패:", error);
          // Safari에서는 muted 상태로 재생 시도 후, 사용자 상호작용 후에 unmute 해야 함
          if (error.name === "NotAllowedError") {
            music.muted = true; // muted 상태로 설정
            button.addEventListener('click', () => {
              if (!isPlaying) {
                music.muted = false; // 사용자 상호 작용 후 unmute
                music.play().then(() => {
                  isPlaying = true;
                  button.classList.add('playing');
                }).catch(err => {
                  console.error("재생 실패:", err);
                });
              }
            }, { once: true }); // 이벤트 리스너는 한 번만 실행되도록 설정
          }
        });
      }
    }
    // 페이지 로드 시 음악 자동 재생
    window.onload = () => {
      playMusic();
    };

    button.addEventListener('click', () => {
      if (isPlaying) {
        music.pause();
        button.classList.remove('playing'); // 클래스 제거
      } else {
        music.play().then(()=>{
          button.classList.add('playing'); // 클래스 추가
        }).catch(err=>{
          console.error("재생 실패",err)
        })

      }
      isPlaying = !isPlaying; // 상태 반전
    });

    // 음악이 끝났을 때 재생 버튼 상태를 업데이트 (선택 사항)
    music.addEventListener('ended', () => {
      isPlaying = false;
      button.classList.remove('playing');
    });
  </script>
</body>
</html>
